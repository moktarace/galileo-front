(this["webpackJsonpgalileo-front"]=this["webpackJsonpgalileo-front"]||[]).push([[0],{19:function(e,t,s){e.exports=s(30)},24:function(e,t,s){},30:function(e,t,s){"use strict";s.r(t);var i=s(0),a=s(17),n=s(6),r=s(1);s(24);class c extends i.Component{getDifficulty(){return i.createElement("div",{className:"uk-card-badge uk-label"}," ",{1:"D\xe9butant",2:"Intermediaire",3:"Difficile",0:""}[this.props.difficulty])}render(){return i.createElement(n.b,{to:"/skill/".concat(this.props.id)},i.createElement("div",{className:"uk-card uk-card-hover uk-card-default"},i.createElement("div",{className:"uk-card-media-top"},i.createElement("img",{alt:"Card",src:this.props.image})),i.createElement("div",{className:"uk-card-body"},i.createElement("h3",{className:"uk-card-title"},this.props.name),this.getDifficulty())))}}var l=c;class d extends i.Component{render(){return i.createElement("div",{className:"uk-padding"},i.createElement("h2",null,this.props.name),i.createElement("div",{className:"uk-child-width-1-3@m uk-grid-small uk-grid-match","uk-grid":"true"},this.props.skills.map(e=>i.createElement(l,{key:e.id,video:e.video,id:e.id,subject_id:e.subject_id,name:e.name,description:e.description,exercices:e.exercices,image:e.image,difficulty:e.difficulty,premium:e.premium}))))}}var o=d;class u extends i.Component{render(){return i.createElement("div",{className:""},i.createElement("h1",null,"Le\xe7ons"),this.props.subjects.map(e=>i.createElement(o,{key:e.id,id:e.id,name:e.name,description:e.description,skills:e.skills})))}}var m=u;class p extends i.Component{constructor(e){super(e),this.state={subjects:[]}}componentDidMount(){this.props.database.getSubjects().then(e=>{this.setState({subjects:e})})}render(){return i.createElement(m,{id:"0",description:"",name:"Premi\xe8re",subjects:this.state.subjects})}}var h=p;class k extends i.Component{getVideoId(){return this.props.link?this.props.link.split("/").pop():""}getVideoLink(){return"https://www.youtube-nocookie.com/embed/"+this.getVideoId()+"?autoplay=0&amp;showinfo=0&amp;rel=0&amp;modestbranding=1&amp;playsinline=1"}render(){return i.createElement("iframe",{src:this.getVideoLink(),width:"1920",height:"1080","uk-responsive":"true"})}}var b=k;class E extends i.Component{constructor(e){super(e),this.state={skill:{id:"",name:"",description:"",difficulty:1,subject_id:"",video:"",exercices:[]},recommanded:[]}}componentDidMount(){const e=+(window.location.href.split("/").pop()||"8329");this.props.database.getSkill(e).then(e=>{this.props.database.getRecommandedSkills(e).then(e=>{this.setState({recommanded:e})}),this.setState({skill:e})})}addResult(e){this.props.database.addResult(e)}render(){var e;return i.createElement("article",{className:"uk-article"},i.createElement("h1",{className:"uk-article-title"},null===(e=this.state.skill)||void 0===e?void 0:e.name),i.createElement("h2",null,"Cours"),i.createElement("div",{className:"uk-panel"},i.createElement("div",{className:"uk-align-left uk-margin-remove-adjacent"},i.createElement(b,{link:this.state.skill.video})),i.createElement("p",{dangerouslySetInnerHTML:{__html:this.state.skill.description}})),i.createElement("hr",{className:"uk-divider-icon"}),i.createElement("h2",null,"Exercices"),i.createElement("ul",{className:"uk-list"},this.state.skill.exercices.map(e=>i.createElement("li",null,i.createElement(n.b,{key:e.id,className:"",to:"/exercice/"+e.id},e.name)))),i.createElement("hr",{className:"uk-divider-icon"}),i.createElement("h2",null,"Comp\xe9tances recommand\xe9es"),i.createElement("div",{className:"uk-child-width-1-3@m uk-grid-small uk-grid-match","uk-grid":"true"},this.state.recommanded.map(e=>i.createElement(l,{video:e.video,key:e.id,id:e.id,subject_id:e.subject_id,name:e.name,description:e.description,exercices:e.exercices,image:e.image,difficulty:e.difficulty,premium:e.premium}))))}}var g=E,v=s(13);var f=class{getSubject(){return new Promise((e,t)=>{fetch("https://cours-galilee.com/wp-json/wp/v2/comptence?per_page=100&orderby=title&order=asc").then(e=>e.json()).then(t=>{var s=new RegExp("<li>"),i=new Map;t.map(e=>{var t;i.has(e.chapitre[0].ID)||i.set(e.chapitre[0].ID,{id:e.chapitre[0].ID,name:e.chapitre[0].post_title,description:"",skills:[]});let a=[];(e.exercices||[]).map(t=>a.push({id:t.id,skill_id:e.id,name:t.post_title,description:"",enonce:t.enonce,questions:t.enonce.replaceAll("</li>","").split(s)||[],answer:t.correction,tip:"demerde-toi"}));let n={id:e.id,subject_id:e.chapitre[0].id,name:e.nom,description:e.content.rendered,premium:!1,difficulty:+e.difficulte,video:e.video,image:e.thumbnail.guid,order:+e.ordering,exercices:a};return null===(t=i.get(e.chapitre[0].id))||void 0===t||t.skills.push(n),n}),e(Array.from(i.values()))})})}};class x{constructor(){this.api=void 0,this.db=void 0,this.api=new f,this.db=new v.a(x.DB_NAME),this.db.version(1).stores({subjects:"id",skills:"id, subject_id",exercices:"id",questions:"id",results:"id"})}isCreated(){return v.a.exists(x.DB_NAME)}addResult(e){return this.db.table("results").add(e)}getSubjects(){return this.db.table("subjects").toArray()}getRecommandedSkills(e){return this.db.table("skills").where({subject_id:e.subject_id}).filter(t=>t.id!==e.id).limit(3).sortBy("difficulty")}getSkill(e){return this.db.table("skills").get(e)}getExercice(e){return this.db.table("exercices").get(e)}initialize(){return new Promise(e=>{this.api.getSubject().then(t=>{t.forEach(e=>{this.db.table("skills").bulkPut(e.skills),e.skills.forEach(e=>{this.db.table("exercices").bulkPut(e.exercices)})}),this.db.table("subjects").bulkPut(t),e(!0)})})}}x.DB_NAME="galileo";var N=x,w=(s(29),s(9));class y extends i.Component{constructor(e){super(e),this.state={exercice:{id:"",skill_id:"",questions:[],answer:"",enonce:"",tip:"",name:"",description:""},step:0,done:!1,time:0,success:!1}}componentDidMount(){const e=+(window.location.href.split("/").pop()||"8329");this.props.database.getExercice(e).then(e=>{this.setState({exercice:e,time:Date.now()})})}getNbStep(){return Math.max(this.state.exercice.questions.length-1,1)}getPreQuestion(){return 0===this.state.exercice.questions.length?"":this.state.exercice.questions[0]}getQuestions(){return 0===this.state.exercice.questions.length?[]:this.state.exercice.questions.slice(0,this.state.step+1)}getResponses(){return["Reponse A","Reponse B","Reponse C","Reponse D"]}finish(){const e={id:Date.now(),success:!0,date:Date.now(),exercice_id:this.state.exercice.id,time:Date.now()-this.state.time};this.props.database.addResult(e),this.setState({done:!0,success:!0})}nextStep(){this.state.step===this.getNbStep()?this.finish():this.setState({step:this.state.step+1})}getFooter(){return this.state.done?i.createElement(n.b,{to:"/skill/"+this.state.exercice.skill_id,type:"button",className:"uk-button uk-button-primary"},"C'est compris"):i.createElement("div",null,this.getResponses().map((e,t)=>i.createElement("button",{key:t,onClick:()=>this.nextStep(),className:"uk-button uk-button-default uk-width-1-1 uk-margin-small-bottom"}," ",e)))}render(){return i.createElement("article",{className:"uk-article"},i.createElement("h1",{className:"uk-article-title"},this.state.exercice.name),i.createElement("h2",null,"Enonc\xe9"),i.createElement("div",{className:"uk-panel"},i.createElement(w.a,null,this.getPreQuestion())),i.createElement("hr",{className:"uk-divider-icon"}),i.createElement("h2",null,"Questions"),i.createElement("div",{className:"uk-panel"},i.createElement("ul",{className:"uk-list uk-list-decimal"},this.getQuestions().map((e,t)=>i.createElement("li",{key:t},i.createElement(w.a,null,e))))),i.createElement("hr",{className:"uk-divider-icon"}),this.state.done&&i.createElement("div",null,i.createElement("h2",null,"Correction"),i.createElement("div",{className:"uk-panel"},i.createElement(w.a,null,this.state.exercice.answer)),i.createElement("hr",{className:"uk-divider-icon"})),this.getFooter())}}var j=y;class _ extends i.Component{constructor(e){super(e),this.database=void 0,this.state={databaseLoaded:!1},this.database=new N}componentDidMount(){this.database.initialize().then(()=>this.setState({databaseLoaded:!0}))}render(){return this.state.databaseLoaded?i.createElement(n.a,null,i.createElement("div",{"uk-sticky":"sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky"},i.createElement("div",{className:"uk-navbar-container","uk-navbar":"true"},i.createElement("div",{className:"uk-navbar-center"},i.createElement(n.b,{to:"/",className:"uk-navbar-item uk-logo"},"Galileo POC")))),i.createElement("div",{className:"uk-container uk-padding uk-container-large"},i.createElement(r.c,null,i.createElement(r.a,{path:"/skill/:id"},i.createElement(g,{database:this.database})),i.createElement(r.a,{path:"/exercice/:id"},i.createElement(j,{database:this.database})),i.createElement(r.a,{path:"/"},i.createElement(h,{database:this.database}))))):i.createElement("div",{className:"uk-container uk-padding uk-container-large"},i.createElement("div",{"uk-spinner":"true"}))}}const S=document.getElementById("root");Object(a.render)(i.createElement(_,null),S)}},[[19,1,2]]]);
//# sourceMappingURL=main.49ab2771.chunk.js.map